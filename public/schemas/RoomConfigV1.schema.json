{
  "$ref": "#/definitions/RoomConfigV1",
  "definitions": {
    "RoomConfigV1": {
      "type": "object",
      "properties": {
        "schemaVersion": {
          "type": "string",
          "const": "1.0"
        },
        "id": {
          "type": "string",
          "minLength": 1
        },
        "meta": {
          "type": "object",
          "properties": {
            "title": {
              "type": "string",
              "minLength": 1
            },
            "summary": {
              "type": "string"
            }
          },
          "required": [
            "title"
          ],
          "additionalProperties": false
        },
        "theme": {
          "type": "object",
          "properties": {
            "palette": {
              "type": "string"
            },
            "lighting": {
              "type": "string"
            }
          },
          "additionalProperties": false,
          "default": {}
        },
        "environment": {
          "type": "object",
          "properties": {
            "background": {
              "type": "string"
            },
            "shadows": {
              "type": "boolean",
              "default": true
            }
          },
          "additionalProperties": false,
          "default": {}
        },
        "camera": {
          "type": "object",
          "properties": {
            "position": {
              "type": "array",
              "minItems": 3,
              "maxItems": 3,
              "items": [
                {
                  "type": "number"
                },
                {
                  "type": "number"
                },
                {
                  "type": "number"
                }
              ]
            },
            "target": {
              "$ref": "#/definitions/RoomConfigV1/properties/camera/properties/position"
            },
            "fov": {
              "type": "number",
              "default": 60
            }
          },
          "required": [
            "position",
            "target"
          ],
          "additionalProperties": false
        },
        "structure": {
          "type": "object",
          "properties": {
            "dimensions": {
              "type": "object",
              "properties": {
                "width": {
                  "type": "number"
                },
                "height": {
                  "type": "number"
                },
                "depth": {
                  "type": "number"
                }
              },
              "required": [
                "width",
                "height",
                "depth"
              ],
              "additionalProperties": false
            },
            "decor": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "minLength": 1
                  },
                  "type": {
                    "type": "string",
                    "minLength": 1
                  },
                  "position": {
                    "$ref": "#/definitions/RoomConfigV1/properties/camera/properties/position"
                  },
                  "rotation": {
                    "$ref": "#/definitions/RoomConfigV1/properties/camera/properties/position"
                  },
                  "scale": {
                    "anyOf": [
                      {
                        "type": "number"
                      },
                      {
                        "type": "array",
                        "minItems": 3,
                        "maxItems": 3,
                        "items": [
                          {
                            "type": "number"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "number"
                          }
                        ]
                      }
                    ]
                  }
                },
                "required": [
                  "id",
                  "type"
                ],
                "additionalProperties": true
              },
              "default": []
            }
          },
          "required": [
            "dimensions"
          ],
          "additionalProperties": false
        },
        "devices": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "alias": {
                "type": "string",
                "minLength": 1
              },
              "category": {
                "type": "string",
                "enum": [
                  "desktop",
                  "laptop",
                  "switch",
                  "router",
                  "firewall",
                  "server",
                  "earth",
                  "misc"
                ]
              },
              "model": {
                "type": "string",
                "minLength": 1
              },
              "position": {
                "$ref": "#/definitions/RoomConfigV1/properties/camera/properties/position"
              },
              "rotation": {
                "$ref": "#/definitions/RoomConfigV1/properties/camera/properties/position"
              },
              "scale": {
                "$ref": "#/definitions/RoomConfigV1/properties/structure/properties/decor/items/properties/scale"
              },
              "quality": {
                "type": "string",
                "enum": [
                  "low",
                  "medium",
                  "high"
                ]
              },
              "metadata": {
                "type": "object",
                "additionalProperties": {}
              }
            },
            "required": [
              "alias",
              "category",
              "model",
              "position"
            ],
            "additionalProperties": false
          },
          "default": []
        },
        "links": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "from": {
                "type": "string",
                "minLength": 1
              },
              "to": {
                "type": "string",
                "minLength": 1
              }
            },
            "required": [
              "from",
              "to"
            ],
            "additionalProperties": false
          },
          "default": []
        },
        "flows": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "minLength": 1
              },
              "path": {
                "type": "array",
                "items": {
                  "type": "string",
                  "minLength": 1
                },
                "minItems": 2
              },
              "style": {
                "type": "object",
                "properties": {
                  "color": {
                    "type": "string",
                    "default": "#00e5ff"
                  },
                  "speed": {
                    "type": "number",
                    "default": 1
                  },
                  "width": {
                    "type": "number"
                  },
                  "shape": {
                    "type": "string",
                    "enum": [
                      "pill",
                      "dot",
                      "arrow"
                    ]
                  }
                },
                "additionalProperties": false,
                "default": {}
              }
            },
            "required": [
              "id",
              "path"
            ],
            "additionalProperties": false
          },
          "default": []
        },
        "phases": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "minLength": 1
              },
              "actions": {
                "type": "array",
                "items": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "showDecor": {
                          "type": "array",
                          "items": {
                            "type": "string",
                            "minLength": 1
                          },
                          "minItems": 1
                        }
                      },
                      "required": [
                        "showDecor"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "hideDecor": {
                          "type": "array",
                          "items": {
                            "type": "string",
                            "minLength": 1
                          },
                          "minItems": 1
                        }
                      },
                      "required": [
                        "hideDecor"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "playFlow": {
                          "type": "string",
                          "minLength": 1
                        }
                      },
                      "required": [
                        "playFlow"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "pauseFlow": {
                          "type": "string",
                          "minLength": 1
                        }
                      },
                      "required": [
                        "pauseFlow"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "hud": {
                          "type": "string",
                          "minLength": 1
                        }
                      },
                      "required": [
                        "hud"
                      ],
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "cameraTo": {
                          "type": "object",
                          "properties": {
                            "target": {
                              "type": "string",
                              "minLength": 1
                            }
                          },
                          "required": [
                            "target"
                          ],
                          "additionalProperties": false
                        }
                      },
                      "required": [
                        "cameraTo"
                      ],
                      "additionalProperties": false
                    }
                  ]
                },
                "default": []
              }
            },
            "required": [
              "id"
            ],
            "additionalProperties": false
          },
          "default": []
        },
        "terminal": {
          "type": "object",
          "properties": {
            "commands": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "minLength": 1
                  },
                  "match": {
                    "type": "string",
                    "minLength": 1
                  },
                  "onRun": {
                    "type": "array",
                    "items": {
                      "anyOf": [
                        {
                          "type": "object",
                          "properties": {
                            "phase": {
                              "type": "string",
                              "minLength": 1
                            }
                          },
                          "required": [
                            "phase"
                          ],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "flow": {
                              "type": "string",
                              "minLength": 1
                            }
                          },
                          "required": [
                            "flow"
                          ],
                          "additionalProperties": false
                        }
                      ]
                    },
                    "minItems": 1
                  }
                },
                "required": [
                  "id",
                  "match",
                  "onRun"
                ],
                "additionalProperties": false
              },
              "default": []
            }
          },
          "additionalProperties": false,
          "default": {
            "commands": []
          }
        },
        "content": {
          "type": "object",
          "properties": {
            "boards": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "minLength": 1
                  },
                  "anchor": {
                    "type": "string",
                    "minLength": 1
                  },
                  "title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "md": {
                    "type": "string",
                    "minLength": 1
                  }
                },
                "required": [
                  "id",
                  "anchor",
                  "title",
                  "md"
                ],
                "additionalProperties": false
              },
              "default": []
            }
          },
          "additionalProperties": false,
          "default": {
            "boards": []
          }
        }
      },
      "required": [
        "schemaVersion",
        "id",
        "meta",
        "camera",
        "structure"
      ],
      "additionalProperties": false
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema#"
}